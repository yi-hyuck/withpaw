<html layout:decorate="~{layout}" xmlns:th="http://www.thymeleaf.org">
<div layout:fragment="content" class="container my-3">
    
    <h2 class="border-bottom py-2" 
        th:text="${petForm.petId != null} ? '반려동물 정보 수정' : '반려동물 정보 추가'"></h2>

    <form 
        th:action="${petForm.petId != null} ? 
        @{/pet/modify/{id}(id=${petForm.petId})} : 
        @{/pet/create}" 
        method="post" 
        th:object="${petForm}">

        <div th:replace="~{form_errors :: formErrorsFragment}"></div>
        
        <input th:if="${petForm.petId != null}" type="hidden" th:field="*{petId}">

        <div class="mb-3">
            <label for="name" class="form-label">이름</label>
            <input type="text" th:field="*{name}" class="form-control" 
                   th:errorclass="is-invalid">
            <div th:errors="*{name}" class="invalid-feedback"></div>
        </div>

        <div class="mb-3">
            <label for="breed" class="form-label">품종</label>
            <input type="text" th:field="*{breed}" class="form-control" 
                   th:errorclass="is-invalid"
                   th:readonly="${petForm.petId != null}"> 
            <div th:errors="*{breed}" class="invalid-feedback"></div>
        </div>

		<div class="mb-3">
		    <label class="form-label">성별</label>
		    <div>
		        <div class="form-check form-check-inline">
		            <input class="form-check-input" type="radio" th:field="*{gender}" id="genderMale" value="MALE"
		                   th:disabled="${petForm.petId != null}">
		            <label class="form-check-label" for="genderMale">남자</label>
		        </div>
		        
		        <div class="form-check form-check-inline">
		            <input class="form-check-input" type="radio" th:field="*{gender}" id="genderFemale" value="FEMALE"
		                   th:disabled="${petForm.petId != null}">
		            <label class="form-check-label" for="genderFemale">여자</label>
		        </div>
		    </div>
		     <div th:if="${#fields.hasErrors('gender')}" th:errors="*{gender}" class="invalid-feedback d-block"></div>
		</div>

        <div class="mb-3">
            <label for="birthDate" class="form-label">생년월일</label>
            <input type="date" th:field="*{birthDate}" class="form-control" 
                   th:errorclass="is-invalid">
            <div th:errors="*{birthDate}" class="invalid-feedback"></div>
        </div>

        <div class="mb-3">
            <label class="form-label">중성화 여부</label>
            <div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" th:field="*{neuter}" id="neuterTrue" th:value="true">
                    <label class="form-check-label" for="neuterTrue">O</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" th:field="*{neuter}" id="neuterFalse" th:value="false">
                    <label class="form-check-label" for="neuterFalse">X</label>
                </div>
            </div>
             <div th:if="${#fields.hasErrors('neuter')}" th:errors="*{neuter}" class="invalid-feedback d-block"></div>
        </div>

        <div class="mb-3">
            <label for="weight" class="form-label">몸무게 (kg)</label>
            <input type="number" step="0.1" th:field="*{weight}" class="form-control" 
                   th:errorclass="is-invalid">
            <div th:errors="*{weight}" class="invalid-feedback"></div>
        </div>

        <div class="d-flex justify-content-end gap-2 mt-4">
            <a th:href="@{/pet/manage}" class="btn btn-secondary">취소</a>
            <button type="submit" class="btn btn-primary" 
                    th:text="${petForm.petId != null} ? '수정하기' : '등록하기'"></button>
        </div>
    </form>
</div>
</html>